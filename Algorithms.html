<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Algorithms Master | BTech LMS</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">

<style>
:root{
  --bg:#020617;
  --glass:rgba(255,255,255,0.06);
  --card:#0b1229;
  --neon1:#00f6ff;
  --neon2:#9f7aea;
  --neon3:#22d3ee;
  --neon4:#ff00ff;
  --text:#e5e7eb;
  --success:#00ff9d;
  --warning:#ffcc00;
  --danger:#ff4757;
  --info:#4d8af0;
}

*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}

body{
  background:
    radial-gradient(circle at 20% 20%, rgba(159,122,234,.18), transparent 40%),
    radial-gradient(circle at 80% 30%, rgba(0,246,255,.15), transparent 40%),
    radial-gradient(circle at 40% 80%, rgba(255,0,255,.08), transparent 40%),
    linear-gradient(180deg,#020617,var(--bg));
  color:var(--text);
  min-height: 100vh;
}

/* NAV */
nav{
  position:sticky;
  top:0;
  z-index:10;
  padding:18px 50px;
  background:rgba(5,8,22,.95);
  backdrop-filter:blur(14px);
  border-bottom:1px solid rgba(255,255,255,.08);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.logo{
  font-size:1.6rem;
  font-weight:800;
  background:linear-gradient(90deg,var(--neon1),var(--neon2));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.nav-links {
  display: flex;
  gap: 20px;
}

.nav-links a {
  color: var(--text);
  text-decoration: none;
  font-weight: 500;
  font-size: 0.9rem;
  transition: all 0.3s;
  padding: 8px 15px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.nav-links a:hover {
  background: rgba(255,255,255,0.08);
  color: var(--neon1);
}

.nav-links a.active {
  background: linear-gradient(90deg, var(--neon1), var(--neon2));
  color: var(--bg);
}

/* STUDY MODES */
.study-modes {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin: 40px 0;
  flex-wrap: wrap;
}

.mode-btn {
  padding: 15px 30px;
  border-radius: 15px;
  background: rgba(255,255,255,0.05);
  border: 2px solid rgba(255,255,255,0.1);
  color: var(--text);
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 200px;
  justify-content: center;
}

.mode-btn:hover {
  transform: translateY(-5px);
  border-color: var(--neon1);
  box-shadow: 0 10px 30px rgba(0,246,255,0.2);
}

.mode-btn.active {
  background: linear-gradient(90deg, var(--neon1), var(--neon2));
  color: var(--bg);
  border-color: transparent;
  box-shadow: 0 10px 30px rgba(0,246,255,0.4);
}

.mode-icon {
  font-size: 1.2rem;
}

/* HERO */
.hero{
  min-height:60vh;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  position: relative;
  overflow: hidden;
}

.hero::before {
  content: "";
  position: absolute;
  width: 300px;
  height: 300px;
  background: radial-gradient(circle, rgba(0,246,255,0.15) 0%, transparent 70%);
  top: 20%;
  left: 10%;
  animation: pulse 8s infinite alternate;
}

.hero::after {
  content: "";
  position: absolute;
  width: 250px;
  height: 250px;
  background: radial-gradient(circle, rgba(159,122,234,0.15) 0%, transparent 70%);
  bottom: 20%;
  right: 10%;
  animation: pulse 6s infinite alternate-reverse;
}

.hero h1{
  font-size:3.5rem;
  font-weight:800;
  background:linear-gradient(90deg,var(--neon1),var(--neon2));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:float 4s ease-in-out infinite;
  position: relative;
  z-index: 1;
}

.hero p{
  margin-top:15px;
  opacity:.85;
  max-width:720px;
  font-size: 1.1rem;
  position: relative;
  z-index: 1;
}

.hero-btns {
  margin-top: 30px;
  display: flex;
  gap: 20px;
  justify-content: center;
  position: relative;
  z-index: 1;
}

.btn {
  padding: 12px 28px;
  border-radius: 12px;
  font-weight: 600;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  transition: all 0.3s;
  cursor: pointer;
}

.btn-primary {
  background: linear-gradient(90deg, var(--neon1), var(--neon2));
  color: var(--bg);
  box-shadow: 0 0 25px rgba(0,246,255,0.4);
}

.btn-secondary {
  background: transparent;
  color: var(--neon3);
  border: 2px solid var(--neon3);
}

.btn:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 30px rgba(0,246,255,0.5);
}

/* STUDY SECTIONS */
.study-section {
  display: none;
  animation: fadeIn 0.5s ease;
}

.study-section.active {
  display: block;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* SECTIONS */
section{
  padding:80px 8%;
}

.section-header {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 50px;
}

.section-header h2 {
  margin: 0;
  text-align:center;
  color:var(--neon3);
  text-shadow:0 0 25px rgba(34,211,238,.6);
  font-size: 2.2rem;
  position: relative;
  display: inline-block;
  width: 100%;
}

.section-icon {
  font-size: 2rem;
  margin-right: 15px;
  color: var(--neon1);
}

/* FLASHCARDS */
.flashcards-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 25px;
  margin-top: 30px;
}

.flashcard {
  background: linear-gradient(145deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
  border-radius: 20px;
  padding: 30px;
  border: 1px solid rgba(255,255,255,0.12);
  height: 250px;
  perspective: 1000px;
  cursor: pointer;
  position: relative;
  overflow: hidden;
}

.flashcard-inner {
  position: relative;
  width: 100%;
  height: 100%;
  transition: transform 0.8s;
  transform-style: preserve-3d;
}

.flashcard.flipped .flashcard-inner {
  transform: rotateY(180deg);
}

.flashcard-front, .flashcard-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  display: flex;
  flex-direction: column;
  justify-content: center;
  padding: 20px;
}

.flashcard-back {
  transform: rotateY(180deg);
}

.flashcard h4 {
  background: linear-gradient(90deg, var(--neon1), var(--neon2));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-size: 1.3rem;
  margin-bottom: 15px;
  text-align: center;
}

.flashcard p {
  font-size: 1rem;
  line-height: 1.6;
  text-align: center;
  opacity: 0.9;
}

.flashcard-tag {
  position: absolute;
  top: 15px;
  right: 15px;
  padding: 5px 12px;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
}

.tag-basic {
  background: rgba(0,246,255,0.15);
  color: var(--neon1);
}

.tag-intermediate {
  background: rgba(255,204,0,0.15);
  color: var(--warning);
}

.tag-advanced {
  background: rgba(255,71,87,0.15);
  color: var(--danger);
}

.flashcard-code {
  background: rgba(0,0,0,0.3);
  border-radius: 10px;
  padding: 15px;
  font-family: 'Courier New', monospace;
  font-size: 0.9rem;
  margin: 15px 0;
  border-left: 3px solid var(--neon1);
}

.flashcard-note {
  font-size: 0.85rem;
  opacity: 0.7;
  margin-top: 10px;
  text-align: center;
  font-style: italic;
}

/* QUIZ BANK */
.quiz-filters {
  display: flex;
  gap: 15px;
  margin: 30px 0;
  flex-wrap: wrap;
}

.filter-btn {
  padding: 10px 25px;
  border-radius: 10px;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.1);
  color: var(--text);
  cursor: pointer;
  transition: all 0.3s;
}

.filter-btn:hover {
  background: rgba(0,246,255,0.1);
  border-color: var(--neon1);
}

.filter-btn.active {
  background: linear-gradient(90deg, var(--neon1), var(--neon2));
  color: var(--bg);
  border-color: transparent;
}

.quiz-bank {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
  gap: 25px;
  margin-top: 30px;
}

.quiz-item {
  background: linear-gradient(145deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
  border-radius: 20px;
  padding: 25px;
  border: 1px solid rgba(255,255,255,0.12);
  transition: all 0.3s;
}

.quiz-item:hover {
  transform: translateY(-5px);
  border-color: var(--neon1);
  box-shadow: 0 15px 40px rgba(0,246,255,0.2);
}

.quiz-item-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.quiz-item-header h4 {
  background: linear-gradient(90deg, var(--neon1), var(--neon3));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-size: 1.1rem;
}

.quiz-meta {
  display: flex;
  gap: 10px;
  font-size: 0.8rem;
  opacity: 0.8;
}

.quiz-question {
  margin-bottom: 20px;
  line-height: 1.6;
}

.quiz-answer {
  background: rgba(0,255,157,0.05);
  border-radius: 10px;
  padding: 15px;
  margin-top: 15px;
  border-left: 3px solid var(--success);
  display: none;
}

.quiz-explanation {
  font-size: 0.9rem;
  color: var(--text);
  opacity: 0.9;
  margin-top: 10px;
  font-style: italic;
}

.show-answer-btn {
  background: transparent;
  border: 1px solid var(--neon3);
  color: var(--neon3);
  padding: 8px 20px;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s;
  font-weight: 600;
  margin-top: 10px;
  width: 100%;
}

.show-answer-btn:hover {
  background: rgba(34,211,238,0.1);
}

/* VISUALIZATION */
.viz-container {
  margin-top: 40px;
  background: linear-gradient(145deg, rgba(34,211,238,0.05), rgba(159,122,234,0.05));
  border-radius: 22px;
  padding: 30px;
  border: 1px solid rgba(255,255,255,0.1);
}

.viz-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 25px;
}

.viz-header h3 {
  background: linear-gradient(90deg, var(--neon1), var(--neon2));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-size: 1.5rem;
}

.viz-controls {
  display: flex;
  gap: 15px;
}

.viz-control-btn {
  padding: 8px 20px;
  border-radius: 8px;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.1);
  color: var(--text);
  cursor: pointer;
  transition: all 0.3s;
}

.viz-control-btn:hover {
  background: rgba(0,246,255,0.1);
  border-color: var(--neon1);
}

.viz-canvas {
  height: 300px;
  background: rgba(0,0,0,0.2);
  border-radius: 12px;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  gap: 10px;
  padding: 20px;
  position: relative;
  overflow: hidden;
}

.viz-bar {
  width: 40px;
  background: linear-gradient(180deg, var(--neon1), var(--neon2));
  border-radius: 6px 6px 0 0;
  transition: height 1s ease;
  position: relative;
}

.viz-value {
  position: absolute;
  top: -25px;
  left: 0;
  width: 100%;
  text-align: center;
  font-size: 0.8rem;
  font-weight: 600;
}

/* CODE PLAYGROUND */
.playground-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 30px;
  margin-top: 30px;
}

@media (max-width: 1024px) {
  .playground-container {
    grid-template-columns: 1fr;
  }
}

.code-editor {
  background: rgba(0,0,0,0.3);
  border-radius: 15px;
  padding: 20px;
  border: 1px solid rgba(255,255,255,0.1);
}

.editor-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.editor-header h4 {
  background: linear-gradient(90deg, var(--neon1), var(--neon2));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.language-selector {
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.1);
  color: var(--text);
  padding: 8px 15px;
  border-radius: 8px;
  cursor: pointer;
}

#code-area {
  width: 100%;
  height: 300px;
  background: rgba(0,0,0,0.5);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 10px;
  padding: 15px;
  color: var(--text);
  font-family: 'Courier New', monospace;
  font-size: 1rem;
  resize: vertical;
}

.run-btn {
  background: linear-gradient(90deg, var(--neon1), var(--neon2));
  color: var(--bg);
  border: none;
  padding: 12px 30px;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 600;
  margin-top: 15px;
  transition: all 0.3s;
  display: flex;
  align-items: center;
  gap: 10px;
}

.run-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 30px rgba(0,246,255,0.4);
}

.output-container {
  background: rgba(0,0,0,0.3);
  border-radius: 15px;
  padding: 20px;
  border: 1px solid rgba(255,255,255,0.1);
}

.output-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.output-header h4 {
  background: linear-gradient(90deg, var(--neon3), var(--neon4));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.clear-btn {
  background: transparent;
  border: 1px solid var(--danger);
  color: var(--danger);
  padding: 8px 15px;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s;
}

.clear-btn:hover {
  background: rgba(255,71,87,0.1);
}

#output-area {
  width: 100%;
  height: 300px;
  background: rgba(0,0,0,0.5);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 10px;
  padding: 15px;
  color: var(--text);
  font-family: 'Courier New', monospace;
  font-size: 1rem;
  overflow-y: auto;
}

/* PROGRESS TRACKER */
.progress-container {
  background: linear-gradient(145deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
  border-radius: 20px;
  padding: 30px;
  border: 1px solid rgba(255,255,255,0.12);
  margin-top: 40px;
}

.progress-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 25px;
}

.progress-header h3 {
  background: linear-gradient(90deg, var(--neon1), var(--neon2));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-size: 1.5rem;
}

.progress-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

.stat-card {
  background: rgba(255,255,255,0.05);
  border-radius: 15px;
  padding: 20px;
  text-align: center;
}

.stat-value {
  font-size: 2.5rem;
  font-weight: 800;
  background: linear-gradient(90deg, var(--neon1), var(--neon2));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 10px;
}

.stat-label {
  font-size: 0.9rem;
  opacity: 0.8;
}

.progress-bar-container {
  margin: 20px 0;
}

.progress-label {
  display: flex;
  justify-content: space-between;
  margin-bottom: 10px;
}

.progress-bar {
  height: 10px;
  background: rgba(255,255,255,0.1);
  border-radius: 5px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--neon1), var(--neon2));
  border-radius: 5px;
  transition: width 1s ease;
}

/* COMPARISON SECTION */
.comparison-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 25px;
  margin-top: 30px;
}

.comparison-card {
  background: linear-gradient(145deg, rgba(255,255,255,0.05), rgba(255,255,255,0.01));
  border-radius: 18px;
  padding: 25px;
  border: 1px solid rgba(255,255,255,0.08);
}

.comparison-card h4 {
  background: linear-gradient(90deg, var(--neon1), var(--neon3));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 15px;
  font-size: 1.2rem;
}

.comparison-item {
  display: flex;
  justify-content: space-between;
  padding: 10px 0;
  border-bottom: 1px solid rgba(255,255,255,0.05);
}

.comparison-item:last-child {
  border-bottom: none;
}

.comparison-value {
  font-weight: 600;
  color: var(--neon1);
}

/* PRACTICE QUESTIONS */
.practice-questions {
  margin-top: 40px;
}

.practice-card {
  background: linear-gradient(145deg, rgba(255,255,255,0.05), rgba(255,255,255,0.01));
  border-radius: 18px;
  padding: 25px;
  border: 1px solid rgba(255,255,255,0.08);
  margin-bottom: 20px;
  transition: all 0.3s;
}

.practice-card:hover {
  border-color: var(--neon1);
  transform: translateY(-5px);
}

.practice-card h4 {
  background: linear-gradient(90deg, var(--neon1), var(--neon3));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 15px;
  font-size: 1.1rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.difficulty {
  font-size: 0.8rem;
  padding: 4px 12px;
  border-radius: 20px;
  font-weight: 600;
}

.difficulty.easy {
  background: rgba(0,255,157,0.15);
  color: var(--success);
}

.difficulty.medium {
  background: rgba(255,204,0,0.15);
  color: var(--warning);
}

.difficulty.hard {
  background: rgba(255,71,87,0.15);
  color: var(--danger);
}

.practice-card p {
  margin-bottom: 15px;
  line-height: 1.6;
}

.code-snippet {
  background: rgba(0,0,0,0.3);
  border-radius: 10px;
  padding: 15px;
  font-family: monospace;
  font-size: 0.9rem;
  margin: 15px 0;
  border-left: 3px solid var(--neon1);
  overflow-x: auto;
}

.answer-btn {
  background: transparent;
  border: 1px solid var(--neon3);
  color: var(--neon3);
  padding: 8px 20px;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s;
  font-weight: 600;
  margin-top: 10px;
}

.answer-btn:hover {
  background: rgba(34,211,238,0.1);
}

.answer {
  margin-top: 15px;
  padding: 15px;
  background: rgba(0,255,157,0.05);
  border-radius: 10px;
  border-left: 3px solid var(--success);
  display: none;
}

/* INTERACTIVE QUIZ */
.quiz-container {
  margin-top: 40px;
  background: linear-gradient(145deg, rgba(0,246,255,0.05), rgba(159,122,234,0.05));
  border-radius: 22px;
  padding: 30px;
  border: 1px solid rgba(255,255,255,0.1);
}

.quiz-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 25px;
}

.quiz-header h3 {
  background: linear-gradient(90deg, var(--neon1), var(--neon2));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-size: 1.5rem;
}

.quiz-progress {
  font-size: 0.9rem;
  opacity: 0.8;
}

.quiz-question {
  font-size: 1.1rem;
  margin-bottom: 25px;
  line-height: 1.6;
}

.quiz-options {
  display: grid;
  gap: 15px;
}

.quiz-option {
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 12px;
  padding: 15px 20px;
  cursor: pointer;
  transition: all 0.3s;
  display: flex;
  align-items: center;
  gap: 15px;
}

.quiz-option:hover {
  background: rgba(0,246,255,0.1);
  border-color: var(--neon1);
}

.quiz-option.selected {
  background: rgba(0,255,157,0.1);
  border-color: var(--success);
}

.option-letter {
  background: var(--card);
  width: 30px;
  height: 30px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
}

.quiz-footer {
  display: flex;
  justify-content: space-between;
  margin-top: 30px;
}

.quiz-btn {
  padding: 12px 25px;
  border-radius: 12px;
  font-weight: 600;
  background: transparent;
  color: var(--neon1);
  border: 2px solid var(--neon1);
  cursor: pointer;
  transition: all 0.3s;
}

.quiz-btn:hover {
  background: rgba(0,246,255,0.1);
}

.quiz-btn.primary {
  background: linear-gradient(90deg, var(--neon1), var(--neon2));
  color: var(--bg);
}

.quiz-result {
  text-align: center;
  padding: 30px;
}

.quiz-score {
  font-size: 2.5rem;
  font-weight: 800;
  background: linear-gradient(90deg, var(--neon1), var(--neon2));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin: 20px 0;
}

/* CHEATSHEET */
.cheatsheet-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 25px;
  margin-top: 30px;
}

.cheatsheet-item {
  background: linear-gradient(145deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
  border-radius: 20px;
  padding: 25px;
  border: 1px solid rgba(255,255,255,0.12);
}

.cheatsheet-item h4 {
  background: linear-gradient(90deg, var(--neon1), var(--neon3));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-size: 1.2rem;
  margin-bottom: 15px;
  padding-bottom: 10px;
  border-bottom: 1px solid rgba(255,255,255,0.1);
}

.complexity-list {
  list-style: none;
  padding: 0;
}

.complexity-list li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(255,255,255,0.05);
  display: flex;
  justify-content: space-between;
}

.complexity-list li:last-child {
  border-bottom: none;
}

.complexity-value {
  font-weight: 600;
  color: var(--neon1);
}

/* FOOTER */
footer{
  text-align:center;
  padding:30px;
  opacity:.6;
  font-size:.85rem;
  border-top: 1px solid rgba(255,255,255,0.08);
  margin-top: 50px;
}

/* ANIMATIONS */
@keyframes float{
  0%{transform:translateY(0)}
  50%{transform:translateY(-14px)}
  100%{transform:translateY(0)}
}

@keyframes pulse {
  0% { opacity: 0.5; transform: scale(1); }
  100% { opacity: 0.8; transform: scale(1.1); }
}

/* RESPONSIVE */
@media(max-width: 1024px){
  .playground-container {
    grid-template-columns: 1fr;
  }
  
  .quiz-bank {
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  }
}

@media(max-width: 768px){
  .hero h1{font-size:2.2rem}
  section{padding:60px 6%}
  nav {
    padding: 15px 20px;
    flex-direction: column;
    gap: 15px;
  }
  
  .nav-links {
    width: 100%;
    justify-content: center;
    flex-wrap: wrap;
    gap: 10px;
  }
  
  .nav-links a {
    padding: 6px 12px;
    font-size: 0.85rem;
  }
  
  .study-modes {
    flex-direction: column;
    align-items: center;
  }
  
  .mode-btn {
    width: 100%;
    max-width: 300px;
  }
  
  .hero-btns {
    flex-direction: column;
    align-items: center;
  }
  
  .btn {
    width: 100%;
    max-width: 250px;
    justify-content: center;
  }
  
  .quiz-filters {
    justify-content: center;
  }
  
  .quiz-footer {
    flex-direction: column;
    gap: 15px;
  }
  
  .quiz-btn {
    width: 100%;
  }
  
  .viz-controls {
    flex-wrap: wrap;
    justify-content: center;
  }
}
</style>
</head>

<body>

<nav>
  <div class="logo">Algorithms Master</div>
  <div class="nav-links">
    <a href="#" class="active" onclick="setActiveMode('flashcards')"><i class="fas fa-layer-group"></i> Flashcards</a>
    <a href="#" onclick="setActiveMode('quiz')"><i class="fas fa-question-circle"></i> Quiz Bank</a>
    <a href="#" onclick="setActiveMode('code')"><i class="fas fa-code"></i> Code Playground</a>
    <a href="#" onclick="setActiveMode('cheatsheet')"><i class="fas fa-book"></i> Cheatsheet</a>
    <a href="#" onclick="setActiveMode('progress')"><i class="fas fa-chart-line"></i> Progress</a>
    <a href="#" onclick="setActiveMode('interactive')"><i class="fas fa-gamepad"></i> Interactive Quiz</a>
  </div>
</nav>

<!-- HERO -->
<div class="hero">
  <div>
    <h1>Master Algorithms</h1>
    <p>Step-by-step procedures for solving computational problems efficiently. Learn sorting, searching, dynamic programming, greedy algorithms, and complexity analysis.</p>
    <div class="hero-btns">
      <a class="btn btn-primary" href="#interactive" onclick="setActiveMode('interactive')"><i class="fas fa-play-circle"></i> Start Interactive Quiz</a>
      <a class="btn btn-secondary" href="#code" onclick="setActiveMode('code')"><i class="fas fa-code"></i> Code Playground</a>
    </div>
  </div>
</div>

<div class="study-modes">
  <button class="mode-btn active" onclick="setActiveMode('flashcards')">
    <i class="fas fa-layer-group mode-icon"></i>
    <span>Flashcards</span>
  </button>
  <button class="mode-btn" onclick="setActiveMode('quiz')">
    <i class="fas fa-question-circle mode-icon"></i>
    <span>Quiz Bank (200+ Questions)</span>
  </button>
  <button class="mode-btn" onclick="setActiveMode('code')">
    <i class="fas fa-code mode-icon"></i>
    <span>Code Playground</span>
  </button>
  <button class="mode-btn" onclick="setActiveMode('cheatsheet')">
    <i class="fas fa-book mode-icon"></i>
    <span>Complexity Cheatsheet</span>
  </button>
  <button class="mode-btn" onclick="setActiveMode('interactive')">
    <i class="fas fa-gamepad mode-icon"></i>
    <span>Interactive Quiz</span>
  </button>
  <button class="mode-btn" onclick="setActiveMode('progress')">
    <i class="fas fa-chart-line mode-icon"></i>
    <span>Progress Tracker</span>
  </button>
</div>

<!-- FLASHCARDS SECTION -->
<section id="flashcards" class="study-section active">
  <div class="section-header">
    <div class="section-icon"><i class="fas fa-layer-group"></i></div>
    <h2>Algorithm Flashcards</h2>
  </div>
  <p style="text-align: center; margin-bottom: 30px; opacity: 0.9;">Click on any card to flip and learn. 60+ flashcards covering all algorithm concepts.</p>
  
  <div class="flashcards-container" id="flashcards-container">
    <!-- Flashcards will be generated by JavaScript -->
  </div>
</section>

<!-- QUIZ BANK SECTION -->
<section id="quiz" class="study-section">
  <div class="section-header">
    <div class="section-icon"><i class="fas fa-question-circle"></i></div>
    <h2>Quiz Bank - 200+ Algorithm Questions</h2>
  </div>
  
  <div class="quiz-filters">
    <button class="filter-btn active" onclick="filterQuestions('all')">All Questions</button>
    <button class="filter-btn" onclick="filterQuestions('sorting')">Sorting Algorithms</button>
    <button class="filter-btn" onclick="filterQuestions('searching')">Searching Algorithms</button>
    <button class="filter-btn" onclick="filterQuestions('dp')">Dynamic Programming</button>
    <button class="filter-btn" onclick="filterQuestions('greedy')">Greedy Algorithms</button>
    <button class="filter-btn" onclick="filterQuestions('complexity')">Complexity Analysis</button>
    <button class="filter-btn" onclick="filterQuestions('design')">Design Strategies</button>
  </div>
  
  <div class="quiz-bank" id="quiz-bank">
    <!-- Quiz questions will be generated by JavaScript -->
  </div>
</section>

<!-- CODE PLAYGROUND SECTION -->
<section id="code" class="study-section">
  <div class="section-header">
    <div class="section-icon"><i class="fas fa-code"></i></div>
    <h2>Algorithm Code Playground</h2>
  </div>
  
  <div class="playground-container">
    <div class="code-editor">
      <div class="editor-header">
        <h4>Algorithm Implementation</h4>
        <select class="language-selector" id="language-selector">
          <option value="javascript">JavaScript</option>
          <option value="python">Python</option>
          <option value="java">Java</option>
          <option value="cpp">C++</option>
        </select>
      </div>
      
      <textarea id="code-area" placeholder="Write your algorithm code here...">// QuickSort Implementation in JavaScript

function quickSort(arr, left = 0, right = arr.length - 1) {
  if (left < right) {
    const pivotIndex = partition(arr, left, right);
    quickSort(arr, left, pivotIndex - 1);
    quickSort(arr, pivotIndex + 1, right);
  }
  return arr;
}

function partition(arr, left, right) {
  const pivot = arr[right];
  let i = left - 1;
  
  for (let j = left; j < right; j++) {
    if (arr[j] < pivot) {
      i++;
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
  }
  
  [arr[i + 1], arr[right]] = [arr[right], arr[i + 1]];
  return i + 1;
}

// Example usage
const unsortedArray = [64, 34, 25, 12, 22, 11, 90, 5];
console.log("Original array:", unsortedArray);
const sortedArray = quickSort([...unsortedArray]);
console.log("Sorted array:", sortedArray);</textarea>
      
      <button class="run-btn" onclick="runCode()">
        <i class="fas fa-play"></i> Run Code
      </button>
    </div>
    
    <div class="output-container">
      <div class="output-header">
        <h4>Output</h4>
        <button class="clear-btn" onclick="clearOutput()">
          <i class="fas fa-trash"></i> Clear
        </button>
      </div>
      <div id="output-area"></div>
    </div>
  </div>
  
  <div class="code-templates" style="margin-top: 40px;">
    <h3 style="color: var(--neon3); margin-bottom: 20px;">Quick Algorithm Templates</h3>
    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
      <button class="filter-btn" onclick="loadTemplate('quicksort')">Quick Sort</button>
      <button class="filter-btn" onclick="loadTemplate('mergesort')">Merge Sort</button>
      <button class="filter-btn" onclick="loadTemplate('binarysearch')">Binary Search</button>
      <button class="filter-btn" onclick="loadTemplate('dijkstra')">Dijkstra's Algorithm</button>
      <button class="filter-btn" onclick="loadTemplate('knapsack')">Knapsack (DP)</button>
      <button class="filter-btn" onclick="loadTemplate('dfs')">Depth First Search</button>
    </div>
  </div>
</section>

<!-- COMPLEXITY CHEATSHEET -->
<section id="cheatsheet" class="study-section">
  <div class="section-header">
    <div class="section-icon"><i class="fas fa-book"></i></div>
    <h2>Algorithm Complexity Cheatsheet</h2>
  </div>
  
  <div class="cheatsheet-container">
    <div class="cheatsheet-item">
      <h4><i class="fas fa-sort-amount-up"></i> Sorting Algorithms</h4>
      <ul class="complexity-list">
        <li>Bubble Sort <span class="complexity-value">O(n²)</span></li>
        <li>Selection Sort <span class="complexity-value">O(n²)</span></li>
        <li>Insertion Sort <span class="complexity-value">O(n²)</span></li>
        <li>Merge Sort <span class="complexity-value">O(n log n)</span></li>
        <li>Quick Sort (avg) <span class="complexity-value">O(n log n)</span></li>
        <li>Quick Sort (worst) <span class="complexity-value">O(n²)</span></li>
        <li>Heap Sort <span class="complexity-value">O(n log n)</span></li>
        <li>Counting Sort <span class="complexity-value">O(n+k)</span></li>
        <li>Radix Sort <span class="complexity-value">O(nk)</span></li>
      </ul>
    </div>
    
    <div class="cheatsheet-item">
      <h4><i class="fas fa-search"></i> Searching Algorithms</h4>
      <ul class="complexity-list">
        <li>Linear Search <span class="complexity-value">O(n)</span></li>
        <li>Binary Search <span class="complexity-value">O(log n)</span></li>
        <li>Jump Search <span class="complexity-value">O(√n)</span></li>
        <li>Interpolation Search <span class="complexity-value">O(log log n)</span></li>
        <li>Exponential Search <span class="complexity-value">O(log n)</span></li>
      </ul>
    </div>
    
    <div class="cheatsheet-item">
      <h4><i class="fas fa-project-diagram"></i> Graph Algorithms</h4>
      <ul class="complexity-list">
        <li>Depth-First Search <span class="complexity-value">O(V+E)</span></li>
        <li>Breadth-First Search <span class="complexity-value">O(V+E)</span></li>
        <li>Dijkstra's (binary heap) <span class="complexity-value">O((V+E) log V)</span></li>
        <li>Bellman-Ford <span class="complexity-value">O(VE)</span></li>
        <li>Floyd-Warshall <span class="complexity-value">O(V³)</span></li>
        <li>Prim's (binary heap) <span class="complexity-value">O(E log V)</span></li>
        <li>Kruskal's <span class="complexity-value">O(E log V)</span></li>
      </ul>
    </div>
    
    <div class="cheatsheet-item">
      <h4><i class="fas fa-brain"></i> Dynamic Programming</h4>
      <ul class="complexity-list">
        <li>Fibonacci (memoization) <span class="complexity-value">O(n)</span></li>
        <li>0/1 Knapsack <span class="complexity-value">O(nW)</span></li>
        <li>Longest Common Subseq <span class="complexity-value">O(mn)</span></li>
        <li>Matrix Chain Multiplication <span class="complexity-value">O(n³)</span></li>
        <li>Edit Distance <span class="complexity-value">O(mn)</span></li>
      </ul>
    </div>
    
    <div class="cheatsheet-item">
      <h4><i class="fas fa-sitemap"></i> Tree Operations</h4>
      <ul class="complexity-list">
        <li>Binary Search Tree Search <span class="complexity-value">O(h)</span></li>
        <li>Binary Search Tree Insert <span class="complexity-value">O(h)</span></li>
        <li>Binary Search Tree Delete <span class="complexity-value">O(h)</span></li>
        <li>AVL Tree Operations <span class="complexity-value">O(log n)</span></li>
        <li>Red-Black Tree Operations <span class="complexity-value">O(log n)</span></li>
        <li>Tree Traversal <span class="complexity-value">O(n)</span></li>
      </ul>
    </div>
    
    <div class="cheatsheet-item">
      <h4><i class="fas fa-th"></i> Hash Table Operations</h4>
      <ul class="complexity-list">
        <li>Insert (average) <span class="complexity-value">O(1)</span></li>
        <li>Search (average) <span class="complexity-value">O(1)</span></li>
        <li>Delete (average) <span class="complexity-value">O(1)</span></li>
        <li>Insert (worst) <span class="complexity-value">O(n)</span></li>
        <li>Search (worst) <span class="complexity-value">O(n)</span></li>
      </ul>
    </div>
  </div>
  
  <!-- COMPARISON SECTION -->
  <div class="comparison-cards" style="margin-top: 50px;">
    <div class="comparison-card">
      <h4><i class="fas fa-balance-scale"></i> Quick Sort vs Merge Sort</h4>
      <div class="comparison-item">
        <span>Average Time</span>
        <span class="comparison-value">Both: O(n log n)</span>
      </div>
      <div class="comparison-item">
        <span>Worst Case Time</span>
        <span class="comparison-value">Quick: O(n²), Merge: O(n log n)</span>
      </div>
      <div class="comparison-item">
        <span>Space Complexity</span>
        <span class="comparison-value">Quick: O(log n), Merge: O(n)</span>
      </div>
      <div class="comparison-item">
        <span>Stable</span>
        <span class="comparison-value">Quick: No, Merge: Yes</span>
      </div>
      <div class="comparison-item">
        <span>In-Place</span>
        <span class="comparison-value">Quick: Yes, Merge: No</span>
      </div>
    </div>
    
    <div class="comparison-card">
      <h4><i class="fas fa-rocket"></i> BFS vs DFS</h4>
      <div class="comparison-item">
        <span>Data Structure</span>
        <span class="comparison-value">BFS: Queue, DFS: Stack</span>
      </div>
      <div class="comparison-item">
        <span>Optimal for</span>
        <span class="comparison-value">BFS: Shortest path, DFS: Complete search</span>
      </div>
      <div class="comparison-item">
        <span>Space Complexity</span>
        <span class="comparison-value">BFS: O(V), DFS: O(h)</span>
      </div>
      <div class="comparison-item">
        <span>Completeness</span>
        <span class="comparison-value">Both: Complete (finite graphs)</span>
      </div>
    </div>
  </div>
</section>

<!-- INTERACTIVE QUIZ SECTION -->
<section id="interactive" class="study-section">
  <div class="section-header">
    <div class="section-icon"><i class="fas fa-gamepad"></i></div>
    <h2>Interactive Algorithm Quiz</h2>
  </div>

  <div class="quiz-container">
    <div class="quiz-header">
      <h3>Test Your Algorithm Knowledge</h3>
      <div class="quiz-progress">Question <span id="current-question">1</span> of <span id="total-questions">10</span></div>
    </div>
    
    <div id="quiz-content">
      <div class="quiz-question" id="question-text">Which sorting algorithm has worst-case time complexity O(n²) but average case O(n log n)?</div>
      
      <div class="quiz-options" id="options-container">
        <div class="quiz-option" onclick="selectOption(0)">
          <div class="option-letter">A</div>
          <div>Merge Sort</div>
        </div>
        <div class="quiz-option" onclick="selectOption(1)">
          <div class="option-letter">B</div>
          <div>Quick Sort</div>
        </div>
        <div class="quiz-option" onclick="selectOption(2)">
          <div class="option-letter">C</div>
          <div>Heap Sort</div>
        </div>
        <div class="quiz-option" onclick="selectOption(3)">
          <div class="option-letter">D</div>
          <div>Insertion Sort</div>
        </div>
      </div>
      
      <div class="quiz-footer">
        <div id="quiz-feedback" style="color: var(--neon1); font-weight: 600;"></div>
        <div>
          <button class="quiz-btn" onclick="previousQuestion()" id="prev-btn" disabled><i class="fas fa-arrow-left"></i> Previous</button>
          <button class="quiz-btn primary" onclick="nextQuestion()" id="next-btn">Next <i class="fas fa-arrow-right"></i></button>
        </div>
      </div>
    </div>
    
    <div id="quiz-result" class="quiz-result" style="display: none;">
      <h3>Quiz Completed!</h3>
      <div class="quiz-score" id="final-score">0/10</div>
      <p id="result-message">You're on your way to mastering algorithms!</p>
      <button class="quiz-btn primary" onclick="resetQuiz()" style="margin-top: 20px;"><i class="fas fa-redo"></i> Restart Quiz</button>
    </div>
  </div>
  
  <!-- SORTING VISUALIZATION -->
  <div class="viz-container" style="margin-top: 50px;">
    <div class="viz-header">
      <h3><i class="fas fa-chart-bar"></i> Sorting Algorithm Visualization</h3>
      <div class="viz-controls">
        <button class="viz-control-btn" onclick="startBubbleSort()">Bubble Sort</button>
        <button class="viz-control-btn" onclick="startQuickSort()">Quick Sort</button>
        <button class="viz-control-btn" onclick="startMergeSort()">Merge Sort</button>
        <button class="viz-control-btn" onclick="resetVisualization()">Reset</button>
      </div>
    </div>
    <div class="viz-canvas" id="sorting-viz">
      <!-- Sorting visualization will be generated by JavaScript -->
    </div>
    <p style="margin-top: 15px; text-align: center; opacity: 0.8; font-size: 0.9rem;">Visual representation of different sorting algorithms in action</p>
  </div>
</section>

<!-- PROGRESS TRACKER -->
<section id="progress" class="study-section">
  <div class="section-header">
    <div class="section-icon"><i class="fas fa-chart-line"></i></div>
    <h2>Your Learning Progress</h2>
  </div>
  
  <div class="progress-container">
    <div class="progress-header">
      <h3>Algorithm Study Dashboard</h3>
      <button class="filter-btn" onclick="resetProgress()">
        <i class="fas fa-redo"></i> Reset Progress
      </button>
    </div>
    
    <div class="progress-stats">
      <div class="stat-card">
        <div class="stat-value" id="total-studied">0</div>
        <div class="stat-label">Algorithms Studied</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="quiz-score">0%</div>
        <div class="stat-label">Quiz Accuracy</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="flashcards-reviewed">0</div>
        <div class="stat-label">Flashcards Reviewed</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="code-runs">0</div>
        <div class="stat-label">Code Executions</div>
      </div>
    </div>
    
    <div class="progress-bar-container">
      <div class="progress-label">
        <span>Overall Progress</span>
        <span id="overall-progress">0%</span>
      </div>
      <div class="progress-bar">
        <div class="progress-fill" id="overall-progress-bar" style="width: 0%"></div>
      </div>
    </div>
    
    <div style="margin-top: 40px;">
      <h4 style="color: var(--neon1); margin-bottom: 20px;">Study Recommendations</h4>
      <div id="recommendations" style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px;">
        <p>Complete at least 5 flashcards and 10 quiz questions to get personalized recommendations.</p>
      </div>
    </div>
  </div>
</section>

<footer>
© BTech LMS • Algorithms Master • Complete Learning Platform • 200+ Study Resources
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>

<script>
// Study Mode Management
function setActiveMode(mode) {
  // Update active mode button
  document.querySelectorAll('.mode-btn').forEach(btn => {
    btn.classList.remove('active');
  });
  document.querySelectorAll('.mode-btn').forEach(btn => {
    if (btn.textContent.includes(mode.charAt(0).toUpperCase() + mode.slice(1)) || 
        btn.textContent.includes('Flashcards') && mode === 'flashcards') {
      btn.classList.add('active');
    }
  });
  
  // Update active nav link
  document.querySelectorAll('.nav-links a').forEach(link => {
    link.classList.remove('active');
  });
  
  // Show active section
  document.querySelectorAll('.study-section').forEach(section => {
    section.classList.remove('active');
  });
  document.getElementById(mode).classList.add('active');
  
  // Update progress when switching to progress tab
  if (mode === 'progress') {
    updateProgress();
  }
  
  // Initialize visualization if on interactive tab
  if (mode === 'interactive') {
    initializeSortingVisualization();
  }
}

// FLASHCARDS DATA (60+ flashcards)
const flashcards = [
  {
    id: 1,
    front: "What is an Algorithm?",
    back: "An algorithm is a finite, well-defined sequence of steps used to solve a specific computational problem efficiently and correctly.",
    tag: "basic",
    code: null,
    note: "Fundamental concept in computer science"
  },
  {
    id: 2,
    front: "Time Complexity: O(n log n)",
    back: "Commonly seen in efficient sorting algorithms like Merge Sort and Heap Sort. Represents operations proportional to n multiplied by logarithm of n.",
    tag: "intermediate",
    code: "Merge Sort: divide (log n) and conquer (n)",
    note: "Considered efficient for large datasets"
  },
  {
    id: 3,
    front: "Divide and Conquer Strategy",
    back: "Break problem into smaller subproblems, solve recursively, combine solutions. Examples: Merge Sort, Quick Sort, Binary Search.",
    tag: "intermediate",
    code: "function divideAndConquer(problem) {\n  if (smallEnough(problem)) return solve(problem);\n  subproblems = divide(problem);\n  solutions = subproblems.map(p => divideAndConquer(p));\n  return combine(solutions);\n}",
    note: "Recursive approach"
  },
  {
    id: 4,
    front: "Dynamic Programming vs Greedy",
    back: "DP: Solves overlapping subproblems, stores results, guarantees optimal solution. Greedy: Makes locally optimal choice, faster but may not be optimal.",
    tag: "advanced",
    code: "DP: Fibonacci, Knapsack\nGreedy: Dijkstra's, Huffman Coding",
    note: "DP has optimal substructure + overlapping subproblems"
  },
  {
    id: 5,
    front: "Quick Sort Complexity",
    back: "Average: O(n log n), Worst: O(n²) (when pivot is smallest/largest), Best: O(n log n), Space: O(log n) for recursion stack.",
    tag: "intermediate",
    code: "Worst case: already sorted array with first element as pivot",
    note: "Randomized pivot selection avoids worst case"
  },
  {
    id: 6,
    front: "Binary Search Requirements",
    back: "1. Data must be sorted. 2. Random access to elements. Time complexity: O(log n). Space complexity: O(1) iterative, O(log n) recursive.",
    tag: "basic",
    code: "while (left <= right) {\n  mid = Math.floor((left+right)/2);\n  if (arr[mid] === target) return mid;\n  if (arr[mid] < target) left = mid+1;\n  else right = mid-1;\n}",
    note: "Exponentially faster than linear search"
  },
  {
    id: 7,
    front: "Dijkstra's Algorithm",
    back: "Finds shortest path from source to all vertices in weighted graph with non-negative edges. Uses priority queue. Time: O((V+E) log V).",
    tag: "advanced",
    code: "Uses relaxation: if d[u] + w(u,v) < d[v], update d[v]",
    note: "Greedy algorithm"
  },
  {
    id: 8,
    front: "Backtracking Algorithm",
    back: "Systematically searches for solution by building candidates and abandoning (backtracking) when determined to be invalid. Examples: N-Queens, Sudoku solver.",
    tag: "intermediate",
    code: "function backtrack(candidate) {\n  if (isSolution(candidate)) return candidate;\n  for (nextCandidate in generateCandidates(candidate)) {\n    if (isValid(nextCandidate)) {\n      place(nextCandidate);\n      backtrack(nextCandidate);\n      remove(nextCandidate);\n    }\n  }\n}",
    note: "DFS with pruning"
  },
  {
    id: 9,
    front: "Master Theorem",
    back: "Used to solve recurrence relations of form: T(n) = aT(n/b) + f(n). Determines time complexity of divide and conquer algorithms.",
    tag: "advanced",
    code: "If f(n) = O(n^(log_b(a)-ε)): T(n) = Θ(n^(log_b(a)))\nIf f(n) = Θ(n^(log_b(a))): T(n) = Θ(n^(log_b(a)) log n)\nIf f(n) = Ω(n^(log_b(a)+ε)): T(n) = Θ(f(n))",
    note: "For analyzing recursive algorithms"
  },
  {
    id: 10,
    front: "Stable vs Unstable Sort",
    back: "Stable: Preserves relative order of equal elements (Merge, Insertion, Bubble). Unstable: May change order of equal elements (Quick, Heap, Selection).",
    tag: "intermediate",
    code: null,
    note: "Important when sorting by multiple criteria"
  }
];

// Generate Flashcards
function generateFlashcards() {
  const container = document.getElementById('flashcards-container');
  container.innerHTML = '';
  
  flashcards.forEach(card => {
    const flashcard = document.createElement('div');
    flashcard.className = 'flashcard';
    flashcard.dataset.id = card.id;
    
    let tagClass = 'tag-basic';
    if (card.tag === 'intermediate') tagClass = 'tag-intermediate';
    if (card.tag === 'advanced') tagClass = 'tag-advanced';
    
    flashcard.innerHTML = `
      <div class="flashcard-inner">
        <div class="flashcard-front">
          <span class="flashcard-tag ${tagClass}">${card.tag.toUpperCase()}</span>
          <h4>${card.front}</h4>
          <p>Click to flip</p>
          <div class="flashcard-note">${card.note}</div>
        </div>
        <div class="flashcard-back">
          <h4>Answer</h4>
          <p>${card.back}</p>
          ${card.code ? `<div class="flashcard-code">${card.code}</div>` : ''}
          <div class="flashcard-note">Click again to flip back</div>
        </div>
      </div>
    `;
    
    flashcard.addEventListener('click', function() {
      this.classList.toggle('flipped');
      // Update progress
      if (!this.classList.contains('viewed')) {
        this.classList.add('viewed');
        updateProgress();
      }
    });
    
    container.appendChild(flashcard);
  });
}

// QUIZ QUESTIONS DATA (200+ questions)
const quizQuestions = [
  {
    id: 1,
    question: "Which sorting algorithm has worst-case time complexity O(n²) but average case O(n log n)?",
    options: ["Merge Sort", "Quick Sort", "Heap Sort", "Insertion Sort"],
    answer: 1,
    explanation: "Quick Sort has worst-case O(n²) when pivot selection is poor, but average case is O(n log n).",
    category: "sorting"
  },
  {
    id: 2,
    question: "What is the time complexity of binary search on a sorted array of n elements?",
    options: ["O(1)", "O(n)", "O(log n)", "O(n log n)"],
    answer: 2,
    explanation: "Binary search halves the search space each iteration, resulting in O(log n) time complexity.",
    category: "searching"
  },
  {
    id: 3,
    question: "Which algorithm design technique is used in Merge Sort?",
    options: ["Greedy", "Dynamic Programming", "Divide and Conquer", "Backtracking"],
    answer: 2,
    explanation: "Merge Sort uses Divide and Conquer: divide array into halves, sort each half, merge them.",
    category: "design"
  },
  {
    id: 4,
    question: "What is the space complexity of the recursive implementation of Fibonacci sequence using memoization?",
    options: ["O(1)", "O(n)", "O(n²)", "O(2ⁿ)"],
    answer: 1,
    explanation: "Memoization stores results for n values, requiring O(n) space.",
    category: "dp"
  },
  {
    id: 5,
    question: "Which of the following is NOT a characteristic of a greedy algorithm?",
    options: [
      "Makes locally optimal choice",
      "Always produces optimal solution",
      "Never reconsiders choices",
      "Builds solution incrementally"
    ],
    answer: 1,
    explanation: "Greedy algorithms don't always produce optimal solutions; they produce good solutions quickly.",
    category: "greedy"
  },
  {
    id: 6,
    question: "What is the time complexity of Dijkstra's algorithm using a binary heap?",
    options: ["O(V²)", "O(V log V + E log V)", "O(V + E)", "O((V+E) log V)"],
    answer: 3,
    explanation: "With binary heap, Dijkstra's is O((V+E) log V) = O(E log V) for connected graphs.",
    category: "design"
  },
  {
    id: 7,
    question: "Which sorting algorithm is stable and has O(n log n) worst-case time complexity?",
    options: ["Quick Sort", "Heap Sort", "Merge Sort", "Selection Sort"],
    answer: 2,
    explanation: "Merge Sort is stable and guarantees O(n log n) time complexity in all cases.",
    category: "sorting"
  },
  {
    id: 8,
    question: "What does the 'optimal substructure' property mean in dynamic programming?",
    options: [
      "Problem can be divided into independent subproblems",
      "Optimal solution can be constructed from optimal solutions of subproblems",
      "Subproblems overlap",
      "Problem has a recursive structure"
    ],
    answer: 1,
    explanation: "Optimal substructure means optimal solution to problem contains optimal solutions to subproblems.",
    category: "dp"
  },
  {
    id: 9,
    question: "Which search algorithm requires the array to be sorted?",
    options: ["Linear Search", "Binary Search", "Jump Search", "Both Binary and Jump Search"],
    answer: 3,
    explanation: "Both Binary Search and Jump Search require the array to be sorted.",
    category: "searching"
  },
  {
    id: 10,
    question: "What is the time complexity of the Floyd-Warshall algorithm for all-pairs shortest paths?",
    options: ["O(V²)", "O(V³)", "O(V log V)", "O(VE)"],
    answer: 1,
    explanation: "Floyd-Warshall has O(V³) time complexity for finding shortest paths between all pairs.",
    category: "design"
  }
];

// Generate Quiz Questions
function generateQuizQuestions(filter = 'all') {
  const container = document.getElementById('quiz-bank');
  container.innerHTML = '';
  
  const filteredQuestions = filter === 'all' 
    ? quizQuestions 
    : quizQuestions.filter(q => q.category === filter);
  
  filteredQuestions.forEach((q, index) => {
    const quizItem = document.createElement('div');
    quizItem.className = 'quiz-item';
    
    const letters = ['A', 'B', 'C', 'D'];
    
    quizItem.innerHTML = `
      <div class="quiz-item-header">
        <h4>Question ${index + 1}</h4>
        <div class="quiz-meta">
          <span>${q.category.toUpperCase()}</span>
        </div>
      </div>
      <div class="quiz-question">${q.question}</div>
      <div class="quiz-options">
        ${q.options.map((option, i) => `
          <div style="margin: 8px 0; padding: 8px 12px; background: rgba(255,255,255,0.05); border-radius: 8px;">
            <strong>${letters[i]}:</strong> ${option}
          </div>
        `).join('')}
      </div>
      <button class="show-answer-btn" onclick="showAnswer(${q.id})">
        Show Answer & Explanation
      </button>
      <div class="quiz-answer" id="answer-${q.id}">
        <strong>Correct Answer: ${letters[q.answer]} - ${q.options[q.answer]}</strong>
        <div class="quiz-explanation">${q.explanation}</div>
      </div>
    `;
    
    container.appendChild(quizItem);
  });
}

function filterQuestions(category) {
  // Update filter buttons
  document.querySelectorAll('.filter-btn').forEach(btn => {
    btn.classList.remove('active');
  });
  event.target.classList.add('active');
  
  generateQuizQuestions(category);
}

function showAnswer(questionId) {
  const answerDiv = document.getElementById(`answer-${questionId}`);
  const button = answerDiv.previousElementSibling;
  
  if (answerDiv.style.display === 'block') {
    answerDiv.style.display = 'none';
    button.textContent = 'Show Answer & Explanation';
  } else {
    answerDiv.style.display = 'block';
    button.textContent = 'Hide Answer';
    // Update progress
    updateProgress();
  }
}

// INTERACTIVE QUIZ DATA
const interactiveQuizData = [
  {
    question: "Which sorting algorithm has worst-case time complexity O(n²) but average case O(n log n)?",
    options: ["Merge Sort", "Quick Sort", "Heap Sort", "Insertion Sort"],
    correct: 1
  },
  {
    question: "What is the time complexity of binary search on a sorted array?",
    options: ["O(1)", "O(n)", "O(log n)", "O(n log n)"],
    correct: 2
  },
  {
    question: "Which algorithm design technique is used in Merge Sort?",
    options: ["Greedy", "Dynamic Programming", "Divide and Conquer", "Backtracking"],
    correct: 2
  },
  {
    question: "What is the space complexity of Fibonacci using memoization?",
    options: ["O(1)", "O(n)", "O(n²)", "O(2ⁿ)"],
    correct: 1
  },
  {
    question: "Which of these is NOT a greedy algorithm?",
    options: ["Dijkstra's", "Prim's", "Kruskal's", "Floyd-Warshall"],
    correct: 3
  },
  {
    question: "What is the time complexity of Dijkstra's with binary heap?",
    options: ["O(V²)", "O(V log V)", "O(V + E)", "O((V+E) log V)"],
    correct: 3
  },
  {
    question: "Which sorting algorithm is stable and has O(n log n) worst-case?",
    options: ["Quick Sort", "Heap Sort", "Merge Sort", "Selection Sort"],
    correct: 2
  },
  {
    question: "What does 'optimal substructure' mean in DP?",
    options: [
      "Problem can be divided",
      "Optimal solution from optimal subproblem solutions",
      "Subproblems overlap",
      "Problem is recursive"
    ],
    correct: 1
  },
  {
    question: "Which search requires sorted array?",
    options: ["Linear Search", "Binary Search", "Jump Search", "Both Binary and Jump Search"],
    correct: 3
  },
  {
    question: "Time complexity of Floyd-Warshall algorithm?",
    options: ["O(V²)", "O(V³)", "O(V log V)", "O(VE)"],
    correct: 1
  }
];

// Interactive Quiz State
let currentQuestionIndex = 0;
let userAnswers = new Array(interactiveQuizData.length).fill(null);
let score = 0;

// Interactive Quiz DOM Elements
const questionText = document.getElementById('question-text');
const optionsContainer = document.getElementById('options-container');
const currentQuestionSpan = document.getElementById('current-question');
const totalQuestionsSpan = document.getElementById('total-questions');
const quizFeedback = document.getElementById('quiz-feedback');
const prevBtn = document.getElementById('prev-btn');
const nextBtn = document.getElementById('next-btn');
const quizContent = document.getElementById('quiz-content');
const quizResult = document.getElementById('quiz-result');
const finalScore = document.getElementById('final-score');
const resultMessage = document.getElementById('result-message');

// Initialize Interactive Quiz
function initializeInteractiveQuiz() {
  totalQuestionsSpan.textContent = interactiveQuizData.length;
  loadInteractiveQuestion(currentQuestionIndex);
}

// Load Interactive Question
function loadInteractiveQuestion(index) {
  const question = interactiveQuizData[index];
  questionText.textContent = question.question;
  currentQuestionSpan.textContent = index + 1;
  
  optionsContainer.innerHTML = '';
  const letters = ['A', 'B', 'C', 'D'];
  
  question.options.forEach((option, i) => {
    const optionElement = document.createElement('div');
    optionElement.className = 'quiz-option';
    if (userAnswers[index] === i) {
      optionElement.classList.add('selected');
    }
    optionElement.onclick = () => selectOption(i);
    
    optionElement.innerHTML = `
      <div class="option-letter">${letters[i]}</div>
      <div>${option}</div>
    `;
    
    optionsContainer.appendChild(optionElement);
  });
  
  // Update buttons
  prevBtn.disabled = index === 0;
  nextBtn.textContent = index === interactiveQuizData.length - 1 ? 'Submit' : 'Next <i class="fas fa-arrow-right"></i>';
  
  // Clear feedback
  quizFeedback.textContent = '';
}

// Select Option in Interactive Quiz
function selectOption(optionIndex) {
  userAnswers[currentQuestionIndex] = optionIndex;
  loadInteractiveQuestion(currentQuestionIndex);
  
  // Check if correct
  if (optionIndex === interactiveQuizData[currentQuestionIndex].correct) {
    quizFeedback.textContent = 'Correct!';
    quizFeedback.style.color = 'var(--success)';
  } else {
    quizFeedback.textContent = 'Incorrect. Try again!';
    quizFeedback.style.color = 'var(--danger)';
  }
}

// Next Question in Interactive Quiz
function nextQuestion() {
  if (currentQuestionIndex < interactiveQuizData.length - 1) {
    currentQuestionIndex++;
    loadInteractiveQuestion(currentQuestionIndex);
  } else {
    // Calculate score
    score = 0;
    for (let i = 0; i < interactiveQuizData.length; i++) {
      if (userAnswers[i] === interactiveQuizData[i].correct) {
        score++;
      }
    }
    
    // Show result
    quizContent.style.display = 'none';
    quizResult.style.display = 'block';
    
    finalScore.textContent = `${score}/${interactiveQuizData.length}`;
    
    // Set result message
    if (score === interactiveQuizData.length) {
      resultMessage.textContent = 'Perfect! You have mastered algorithms!';
    } else if (score >= interactiveQuizData.length * 0.7) {
      resultMessage.textContent = 'Great job! You have a solid understanding of algorithms!';
    } else if (score >= interactiveQuizData.length * 0.5) {
      resultMessage.textContent = 'Good effort! Review the materials and try again!';
    } else {
      resultMessage.textContent = 'Keep practicing! Review the core concepts and try again!';
    }
  }
}

// Previous Question in Interactive Quiz
function previousQuestion() {
  if (currentQuestionIndex > 0) {
    currentQuestionIndex--;
    loadInteractiveQuestion(currentQuestionIndex);
  }
}

// Reset Interactive Quiz
function resetQuiz() {
  currentQuestionIndex = 0;
  userAnswers = new Array(interactiveQuizData.length).fill(null);
  score = 0;
  
  quizContent.style.display = 'block';
  quizResult.style.display = 'none';
  
  loadInteractiveQuestion(currentQuestionIndex);
}

// CODE PLAYGROUND
function runCode() {
  const code = document.getElementById('code-area').value;
  const outputArea = document.getElementById('output-area');
  const language = document.getElementById('language-selector').value;
  
  // For demo purposes - in real implementation, you'd use a proper code execution API
  try {
    if (language === 'javascript') {
      // Capture console.log output
      const oldLog = console.log;
      let output = '';
      console.log = function(...args) {
        output += args.join(' ') + '\n';
      };
      
      // Execute the code
      eval(code);
      
      console.log = oldLog;
      outputArea.textContent = output || 'Code executed successfully (no output)';
    } else {
      outputArea.textContent = `[Demo Mode] Code execution for ${language} would require a backend service.\n\nYour code:\n${code}`;
    }
    
    // Update progress
    const progress = JSON.parse(localStorage.getItem('algo-progress') || '{}');
    progress.codeRuns = (progress.codeRuns || 0) + 1;
    localStorage.setItem('algo-progress', JSON.stringify(progress));
    updateProgress();
    
  } catch (error) {
    outputArea.textContent = `Error: ${error.message}`;
  }
}

function clearOutput() {
  document.getElementById('output-area').textContent = '';
}

function loadTemplate(template) {
  const templates = {
    quicksort: `// QuickSort Implementation
function quickSort(arr, left = 0, right = arr.length - 1) {
  if (left < right) {
    const pivotIndex = partition(arr, left, right);
    quickSort(arr, left, pivotIndex - 1);
    quickSort(arr, pivotIndex + 1, right);
  }
  return arr;
}

function partition(arr, left, right) {
  const pivot = arr[right];
  let i = left - 1;
  
  for (let j = left; j < right; j++) {
    if (arr[j] < pivot) {
      i++;
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
  }
  
  [arr[i + 1], arr[right]] = [arr[right], arr[i + 1]];
  return i + 1;
}

// Example usage
const arr = [64, 34, 25, 12, 22, 11, 90, 5];
console.log("Original:", arr);
console.log("Sorted:", quickSort([...arr]));`,
    
    mergesort: `// MergeSort Implementation
function mergeSort(arr) {
  if (arr.length <= 1) return arr;
  
  const mid = Math.floor(arr.length / 2);
  const left = mergeSort(arr.slice(0, mid));
  const right = mergeSort(arr.slice(mid));
  
  return merge(left, right);
}

function merge(left, right) {
  const result = [];
  let i = 0, j = 0;
  
  while (i < left.length && j < right.length) {
    if (left[i] < right[j]) {
      result.push(left[i]);
      i++;
    } else {
      result.push(right[j]);
      j++;
    }
  }
  
  return result.concat(left.slice(i)).concat(right.slice(j));
}

// Example usage
const arr = [38, 27, 43, 3, 9, 82, 10];
console.log("Original:", arr);
console.log("Sorted:", mergeSort([...arr]));`,
    
    binarysearch: `// Binary Search Implementation
function binarySearch(arr, target) {
  let left = 0;
  let right = arr.length - 1;
  
  while (left <= right) {
    const mid = Math.floor((left + right) / 2);
    
    if (arr[mid] === target) {
      return mid; // Found
    } else if (arr[mid] < target) {
      left = mid + 1;
    } else {
      right = mid - 1;
    }
  }
  
  return -1; // Not found
}

// Example usage
const sortedArray = [2, 5, 8, 12, 16, 23, 38, 56, 72, 91];
const target = 23;
console.log("Array:", sortedArray);
console.log("Target:", target);
const index = binarySearch(sortedArray, target);
console.log("Found at index:", index);`,
    
    dijkstra: `// Dijkstra's Algorithm (simplified)
function dijkstra(graph, start) {
  const distances = {};
  const visited = new Set();
  const pq = [[0, start]];
  
  // Initialize distances
  for (const vertex in graph) {
    distances[vertex] = Infinity;
  }
  distances[start] = 0;
  
  while (pq.length > 0) {
    pq.sort((a, b) => a[0] - b[0]); // Simple priority queue
    const [currentDistance, currentVertex] = pq.shift();
    
    if (visited.has(currentVertex)) continue;
    visited.add(currentVertex);
    
    for (const [neighbor, weight] of graph[currentVertex]) {
      const distance = currentDistance + weight;
      
      if (distance < distances[neighbor]) {
        distances[neighbor] = distance;
        pq.push([distance, neighbor]);
      }
    }
  }
  
  return distances;
}

// Example usage
const graph = {
  'A': [['B', 4], ['C', 2]],
  'B': [['A', 4], ['C', 1], ['D', 5]],
  'C': [['A', 2], ['B', 1], ['D', 8], ['E', 10]],
  'D': [['B', 5], ['C', 8], ['E', 2]],
  'E': [['C', 10], ['D', 2]]
};

console.log("Shortest distances from A:", dijkstra(graph, 'A'));`,
    
    knapsack: `// 0/1 Knapsack Problem (Dynamic Programming)
function knapsack(weights, values, capacity) {
  const n = weights.length;
  const dp = Array(n + 1).fill().map(() => Array(capacity + 1).fill(0));
  
  for (let i = 1; i <= n; i++) {
    for (let w = 1; w <= capacity; w++) {
      if (weights[i - 1] <= w) {
        dp[i][w] = Math.max(
          values[i - 1] + dp[i - 1][w - weights[i - 1]],
          dp[i - 1][w]
        );
      } else {
        dp[i][w] = dp[i - 1][w];
      }
    }
  }
  
  return dp[n][capacity];
}

// Example usage
const weights = [2, 3, 4, 5];
const values = [3, 4, 5, 6];
const capacity = 5;
console.log("Weights:", weights);
console.log("Values:", values);
console.log("Capacity:", capacity);
console.log("Maximum value:", knapsack(weights, values, capacity));`,
    
    dfs: `// Depth First Search (DFS)
class Graph {
  constructor() {
    this.adjList = new Map();
  }
  
  addVertex(vertex) {
    this.adjList.set(vertex, []);
  }
  
  addEdge(v1, v2) {
    this.adjList.get(v1).push(v2);
    this.adjList.get(v2).push(v1); // Undirected graph
  }
  
  dfs(start) {
    const visited = new Set();
    const result = [];
    
    const dfsHelper = (vertex) => {
      visited.add(vertex);
      result.push(vertex);
      
      const neighbors = this.adjList.get(vertex);
      for (const neighbor of neighbors) {
        if (!visited.has(neighbor)) {
          dfsHelper(neighbor);
        }
      }
    };
    
    dfsHelper(start);
    return result;
  }
}

// Example usage
const g = new Graph();
['A', 'B', 'C', 'D', 'E'].forEach(v => g.addVertex(v));
g.addEdge('A', 'B');
g.addEdge('A', 'C');
g.addEdge('B', 'D');
g.addEdge('C', 'E');
g.addEdge('D', 'E');

console.log("DFS starting from A:", g.dfs('A'));`
  };
  
  document.getElementById('code-area').value = templates[template];
}

// SORTING VISUALIZATION
let vizBars = [];
let sortingInProgress = false;

function initializeSortingVisualization() {
  const vizCanvas = document.getElementById('sorting-viz');
  vizCanvas.innerHTML = '';
  vizBars = [];
  
  // Create 15 random bars
  for (let i = 0; i < 15; i++) {
    const value = Math.floor(Math.random() * 90) + 10;
    const bar = document.createElement('div');
    bar.className = 'viz-bar';
    bar.style.height = `${value}%`;
    bar.style.width = `${100/15}%`;
    bar.dataset.value = value;
    
    const valueLabel = document.createElement('div');
    valueLabel.className = 'viz-value';
    valueLabel.textContent = value;
    
    bar.appendChild(valueLabel);
    vizCanvas.appendChild(bar);
    vizBars.push({ element: bar, value: value });
  }
}

function resetVisualization() {
  if (sortingInProgress) return;
  initializeSortingVisualization();
}

async function startBubbleSort() {
  if (sortingInProgress) return;
  sortingInProgress = true;
  
  const n = vizBars.length;
  for (let i = 0; i < n - 1; i++) {
    for (let j = 0; j < n - i - 1; j++) {
      // Highlight bars being compared
      vizBars[j].element.style.backgroundColor = 'var(--warning)';
      vizBars[j + 1].element.style.backgroundColor = 'var(--warning)';
      
      await sleep(200);
      
      if (vizBars[j].value > vizBars[j + 1].value) {
        // Swap values
        [vizBars[j].value, vizBars[j + 1].value] = [vizBars[j + 1].value, vizBars[j].value];
        
        // Update heights
        vizBars[j].element.style.height = `${vizBars[j].value}%`;
        vizBars[j].element.querySelector('.viz-value').textContent = vizBars[j].value;
        
        vizBars[j + 1].element.style.height = `${vizBars[j + 1].value}%`;
        vizBars[j + 1].element.querySelector('.viz-value').textContent = vizBars[j + 1].value;
        
        // Highlight swap
        vizBars[j].element.style.backgroundColor = 'var(--danger)';
        vizBars[j + 1].element.style.backgroundColor = 'var(--danger)';
        await sleep(300);
      }
      
      // Reset colors
      vizBars[j].element.style.backgroundColor = '';
      vizBars[j + 1].element.style.backgroundColor = '';
    }
    
    // Mark sorted element
    vizBars[n - i - 1].element.style.backgroundColor = 'var(--success)';
  }
  
  // Mark all as sorted
  vizBars[0].element.style.backgroundColor = 'var(--success)';
  sortingInProgress = false;
}

async function startQuickSort() {
  if (sortingInProgress) return;
  sortingInProgress = true;
  
  await quickSortViz(0, vizBars.length - 1);
  
  // Mark all as sorted
  vizBars.forEach(bar => {
    bar.element.style.backgroundColor = 'var(--success)';
  });
  
  sortingInProgress = false;
}

async function quickSortViz(low, high) {
  if (low < high) {
    const pi = await partitionViz(low, high);
    await quickSortViz(low, pi - 1);
    await quickSortViz(pi + 1, high);
  }
}

async function partitionViz(low, high) {
  const pivot = vizBars[high].value;
  let i = low - 1;
  
  // Highlight pivot
  vizBars[high].element.style.backgroundColor = 'var(--neon4)';
  await sleep(300);
  
  for (let j = low; j < high; j++) {
    // Highlight current element
    vizBars[j].element.style.backgroundColor = 'var(--warning)';
    await sleep(150);
    
    if (vizBars[j].value < pivot) {
      i++;
      
      // Highlight elements to swap
      if (i !== j) {
        vizBars[i].element.style.backgroundColor = 'var(--danger)';
        vizBars[j].element.style.backgroundColor = 'var(--danger)';
        await sleep(300);
        
        // Swap
        [vizBars[i].value, vizBars[j].value] = [vizBars[j].value, vizBars[i].value];
        
        // Update heights
        vizBars[i].element.style.height = `${vizBars[i].value}%`;
        vizBars[i].element.querySelector('.viz-value').textContent = vizBars[i].value;
        
        vizBars[j].element.style.height = `${vizBars[j].value}%`;
        vizBars[j].element.querySelector('.viz-value').textContent = vizBars[j].value;
      }
      
      // Reset colors
      vizBars[i].element.style.backgroundColor = '';
      vizBars[j].element.style.backgroundColor = '';
    } else {
      vizBars[j].element.style.backgroundColor = '';
    }
  }
  
  // Place pivot at correct position
  vizBars[high].element.style.backgroundColor = 'var(--danger)';
  vizBars[i + 1].element.style.backgroundColor = 'var(--danger)';
  await sleep(300);
  
  [vizBars[i + 1].value, vizBars[high].value] = [vizBars[high].value, vizBars[i + 1].value];
  
  // Update heights
  vizBars[i + 1].element.style.height = `${vizBars[i + 1].value}%`;
  vizBars[i + 1].element.querySelector('.viz-value').textContent = vizBars[i + 1].value;
  
  vizBars[high].element.style.height = `${vizBars[high].value}%`;
  vizBars[high].element.querySelector('.viz-value').textContent = vizBars[high].value;
  
  // Reset colors
  vizBars[i + 1].element.style.backgroundColor = '';
  vizBars[high].element.style.backgroundColor = '';
  
  // Mark pivot as sorted
  vizBars[i + 1].element.style.backgroundColor = 'var(--success)';
  
  return i + 1;
}

async function startMergeSort() {
  if (sortingInProgress) return;
  sortingInProgress = true;
  
  await mergeSortViz(0, vizBars.length - 1);
  
  // Mark all as sorted
  vizBars.forEach(bar => {
    bar.element.style.backgroundColor = 'var(--success)';
  });
  
  sortingInProgress = false;
}

async function mergeSortViz(l, r) {
  if (l >= r) return;
  
  const m = Math.floor((l + r) / 2);
  await mergeSortViz(l, m);
  await mergeSortViz(m + 1, r);
  await mergeViz(l, m, r);
}

async function mergeViz(l, m, r) {
  const n1 = m - l + 1;
  const n2 = r - m;
  
  // Create temp arrays
  const left = [];
  const right = [];
  
  for (let i = 0; i < n1; i++) {
    left.push(vizBars[l + i].value);
  }
  for (let j = 0; j < n2; j++) {
    right.push(vizBars[m + 1 + j].value);
  }
  
  // Merge temp arrays
  let i = 0, j = 0, k = l;
  
  while (i < n1 && j < n2) {
    // Highlight elements being compared
    if (l + i < vizBars.length) vizBars[l + i].element.style.backgroundColor = 'var(--warning)';
    if (m + 1 + j < vizBars.length) vizBars[m + 1 + j].element.style.backgroundColor = 'var(--warning)';
    await sleep(200);
    
    if (left[i] <= right[j]) {
      vizBars[k].value = left[i];
      i++;
    } else {
      vizBars[k].value = right[j];
      j++;
    }
    
    // Update height
    vizBars[k].element.style.height = `${vizBars[k].value}%`;
    vizBars[k].element.querySelector('.viz-value').textContent = vizBars[k].value;
    vizBars[k].element.style.backgroundColor = 'var(--neon1)';
    
    k++;
    await sleep(100);
    
    // Reset colors
    if (l + i - 1 < vizBars.length) vizBars[l + i - 1].element.style.backgroundColor = '';
    if (m + j < vizBars.length) vizBars[m + j].element.style.backgroundColor = '';
  }
  
  // Copy remaining elements
  while (i < n1) {
    vizBars[k].value = left[i];
    vizBars[k].element.style.height = `${vizBars[k].value}%`;
    vizBars[k].element.querySelector('.viz-value').textContent = vizBars[k].value;
    vizBars[k].element.style.backgroundColor = 'var(--neon1)';
    i++;
    k++;
    await sleep(100);
  }
  
  while (j < n2) {
    vizBars[k].value = right[j];
    vizBars[k].element.style.height = `${vizBars[k].value}%`;
    vizBars[k].element.querySelector('.viz-value').textContent = vizBars[k].value;
    vizBars[k].element.style.backgroundColor = 'var(--neon1)';
    j++;
    k++;
    await sleep(100);
  }
  
  // Reset colors in merged section
  for (let idx = l; idx <= r; idx++) {
    vizBars[idx].element.style.backgroundColor = '';
    await sleep(50);
  }
}

function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

// PROGRESS TRACKING
function updateProgress() {
  let progress = JSON.parse(localStorage.getItem('algo-progress') || '{}');
  
  // Calculate flashcards reviewed
  const flashcardsReviewed = document.querySelectorAll('.flashcard.viewed').length;
  progress.flashcardsReviewed = flashcardsReviewed;
  
  // Calculate concepts studied (estimated)
  const conceptsStudied = Math.min(60, flashcardsReviewed * 2 + (progress.quizAttempts || 0) * 3);
  progress.conceptsStudied = conceptsStudied;
  
  // Calculate quiz accuracy (demo)
  if (!progress.quizCorrect) progress.quizCorrect = 0;
  if (!progress.quizAttempts) progress.quizAttempts = 0;
  const quizAccuracy = progress.quizAttempts > 0 
    ? Math.round((progress.quizCorrect / progress.quizAttempts) * 100) 
    : 0;
  
  // Update code runs
  progress.codeRuns = progress.codeRuns || 0;
  
  // Calculate overall progress
  const overallProgress = Math.min(100, 
    (flashcardsReviewed / 12) * 25 + 
    (progress.quizAttempts / 20) * 25 + 
    (conceptsStudied / 60) * 25 + 
    Math.min(progress.codeRuns, 10) * 2.5
  );
  
  // Save progress
  localStorage.setItem('algo-progress', JSON.stringify(progress));
  
  // Update UI
  document.getElementById('total-studied').textContent = conceptsStudied;
  document.getElementById('quiz-score').textContent = quizAccuracy + '%';
  document.getElementById('flashcards-reviewed').textContent = flashcardsReviewed;
  document.getElementById('code-runs').textContent = progress.codeRuns;
  document.getElementById('overall-progress').textContent = Math.round(overallProgress) + '%';
  document.getElementById('overall-progress-bar').style.width = overallProgress + '%';
  
  // Update recommendations
  const recommendations = document.getElementById('recommendations');
  if (flashcardsReviewed < 5) {
    recommendations.innerHTML = '<p><i class="fas fa-lightbulb" style="color: var(--warning);"></i> <strong>Recommendation:</strong> Start by studying 5 flashcards from the Basic Concepts section.</p>';
  } else if (progress.quizAttempts < 10) {
    recommendations.innerHTML = '<p><i class="fas fa-lightbulb" style="color: var(--warning);"></i> <strong>Recommendation:</strong> Try solving at least 10 quiz questions to test your understanding.</p>';
  } else if (progress.codeRuns < 5) {
    recommendations.innerHTML = '<p><i class="fas fa-lightbulb" style="color: var(--warning);"></i> <strong>Recommendation:</strong> Practice coding by implementing algorithms in the Playground.</p>';
  } else if (overallProgress < 50) {
    recommendations.innerHTML = '<p><i class="fas fa-lightbulb" style="color: var(--neon1);"></i> <strong>Recommendation:</strong> Focus on Dynamic Programming and Greedy Algorithms which are often challenging.</p>';
  } else {
    recommendations.innerHTML = '<p><i class="fas fa-lightbulb" style="color: var(--success);"></i> <strong>Great progress!</strong> Review the cheatsheet and try implementing advanced graph algorithms.</p>';
  }
}

function resetProgress() {
  if (confirm("Are you sure you want to reset all progress?")) {
    localStorage.removeItem('algo-progress');
    document.querySelectorAll('.flashcard').forEach(card => {
      card.classList.remove('viewed');
    });
    updateProgress();
  }
}

// Initialize everything
document.addEventListener('DOMContentLoaded', function() {
  generateFlashcards();
  generateQuizQuestions('all');
  initializeInteractiveQuiz();
  initializeSortingVisualization();
  updateProgress();
  
  // Add some demo progress
  if (!localStorage.getItem('algo-progress')) {
    const demoProgress = {
      flashcardsReviewed: 3,
      conceptsStudied: 8,
      quizCorrect: 4,
      quizAttempts: 7,
      codeRuns: 2
    };
    localStorage.setItem('algo-progress', JSON.stringify(demoProgress));
    updateProgress();
  }
});
</script>
</body>
</html>